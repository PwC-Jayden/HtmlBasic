<!DOCTYPE html>
<html lang="en">
<head>
	<title>ECMA 2015</title>

	<meta charset="UTF-8" />
	<meta name="keywords" content="html,css,js" />
	<meta name="description" content="for MS Team Training" />
	<meta name="author" content="Xiaohui,xiaohui.ni@pwc.com" />
	<meta name="copyright" content="MIT" />

	<base href="http://localhost:3000/views/" />
	<base target="_self" />

	<style></style>

	<link rel="stylesheet" href="/stylesheet/common.css" />
	<link rel="stylesheet" href="/stylesheet/es2015.css">
	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/rainbow.min.css">
	<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
</head>
<body class="addBorder">
	<p class="caption">body</p>
	<header class="addBorder">
		<p class="caption">header</p>
		<h1>ECMA Script 2015</h1>
	</header>

	<nav class="addBorder">
		<p class="caption">nav</p>		
		<a href="index.html">Home</a>
		<a href="http://es6.ruanyifeng.com/" target="_blank">tutorial</a>
		<a href="http://www.ecma-international.org/ecma-262/6.0/" target="_blank">ECMA-262</a>
		<a href="https://kangax.github.io/compat-table/es6/" target="_blank">browser compatibility table</a>
	</nav>

	<section class="addBorder">
		<p class="caption">section</p>
		<fieldset>				
			<legend>Constants</legend>
			<pre><code>
const PI = 3.141593;
PI = 1;
PI > 3.0
			</code></pre>
		
		</fieldset>

		<fieldset>
			<legend>Scoping</legend>
			<pre><code>
for (let i = 0; i < a.length; i++) {
    let x = a[i];
}
for (let i = 0; i < b.length; i++) {
    let y = b[i];
}

let callbacks = []
for (let i = 0; i <= 2; i++) {
    callbacks[i] = function () { return i * 2 }
}
callbacks[0]() === 0
callbacks[1]() === 2
callbacks[2]() === 4
			</code></pre>
		</fieldset>

		<fieldset>
			<legend>Arrow Functions</legend>
			<pre><code>
let evens = [2,4,6,8,10];
let odds  = evens.map(v => v + 1)
let pairs = evens.map(v => ({ even: v, odd: v + 1 }))
let nums  = evens.map((v, i) => v + i)
			</code></pre>

		</fieldset>

		<fieldset>
			<legend>Rest Parameter</legend>
			<pre><code>
function f (x, y, ...a) {
    return (x + y) * a.length
}
f(1, 2, "hello", true, 7) === 9;
			</code></pre>

		</fieldset>

		<fieldset>
			<legend>Spread Operator</legend>
			<pre><code>
var str = "foo";
var chars = [ ...str ] // [ "f", "o", "o" ];
			</code></pre>

		</fieldset>

		<fieldset>
			<legend>Template Literals</legend>
			<pre><code>
var customer = { name: "Foo" }
var card = { amount: 7, product: "Bar", unitprice: 42 }
var message = `Hello ${customer.name},
want to buy ${card.amount} ${card.product} for
a total of ${card.amount * card.unitprice} bucks?`
			</code></pre>

		</fieldset>

		<fieldset>
			<legend>Enhanced Object Properties</legend>
			<pre><code>
obj = {
	x: x,
	y: y,
	foo: function (a, b) {
	    …
	}
};

obj = {
	x,
	y,
	foo (a, b) {
	    …
	}
};
			</code></pre>

		</fieldset>

		<fieldset>
			<legend>Destructuring Assignment</legend>
			<pre><code>
let [a, b] = [1,2];
[a,b]=[b,a];

function foo(){return [1,2,3]}
[a,b,c]=foo();

function foo ([ name, age ]) {
    console.log(name, age);
}
foo(["Harry", "18"]);
			</code></pre>

		</fieldset>

		<fieldset>
			<legend>Modules</legend>
			<pre><code>
//  lib/math.js
export function sum (x, y) { return x + y }
export var pi = 3.141593

//  someApp.js
import * as math from "lib/math"
console.log("2π = " + math.sum(math.pi, math.pi))

//  otherApp.js
import { sum, pi } from "lib/math"
console.log("2π = " + sum(pi, pi))
			</code></pre>

		</fieldset>

		<fieldset>
			<legend>Classes</legend>
			<pre><code>
class Shape {
    constructor (id, x, y) {
        this.id = id
        this.move(x, y)
    }
    move (x, y) {
        this.x = x
        this.y = y
    }
}

class Rectangle extends Shape {
    constructor (id, x, y, width, height) {
        super(id, x, y)
        this.width  = width
        this.height = height
    }
}
class Circle extends Shape {
    constructor (id, x, y, radius) {
        super(id, x, y)
        this.radius = radius
    }
}
			</code></pre>
		</fieldset>

		<fieldset>
			<legend>Iterators</legend>
			<pre><code>
let a = {a:1, b:2, c:3};
for(let i of Object.keys(a))console.log(i);
for(let i of Object.values(a))console.log(i);

for(let i in Object.values(a))console.log(i)
			</code></pre>
		</fieldset>

		<fieldset>
			<legend>Set</legend>
			<pre><code>
let s = new Set(["hi", "byebye", "hi"]);
s.add("hello").add("goodbye").add("hello");
s.size === 2;
s.has("hello") === true;
for (let key of s.values()) // insertion order
    console.log(key);
			</code></pre>
		</fieldset>

		<fieldset>
			<legend>Map</legend>
			<pre><code>
let m = new Map();
let s = Symbol();
m.set("hello", 42);
m.set(s, 34);
m.get(s) === 34;
m.size === 2;
for (let [ key, val ] of m.entries())
    console.log(key.toString() + " = " + val);
			</code></pre>
		</fieldset>

		<fieldset>
			<legend>New Built-In Methods</legend>
			<pre><code>
[ 1, 3, 4, 2 ].find(x => x > 3) // 4

[ 1, 3, 4, 2 ].findIndex(x => x > 3) // 2

"foo".repeat(3);
			</code></pre>
		</fieldset>

		<fieldset>
			<legend>Intl</legend>
			<pre><code>
var l10nUSD = new Intl.NumberFormat("en-US", { style: "currency", currency: "USD" });
var l10nGBP = new Intl.NumberFormat("en-GB", { style: "currency", currency: "GBP" });
var l10nEUR = new Intl.NumberFormat("de-DE", { style: "currency", currency: "EUR" });
console.log(l10nUSD.format(100200300.40));
console.log(l10nGBP.format(100200300.40));
console.log(l10nEUR.format(100200300.40));

var date = new Date(Date.UTC(2012, 11, 20, 3, 0, 0));

// formats below assume the local time zone of the locale;
// America/Los_Angeles for the US

// US English uses month-day-year order
console.log(new Intl.DateTimeFormat('en-US').format(date));
// → "12/20/2012"

// British English uses day-month-year order
console.log(new Intl.DateTimeFormat('en-GB').format(date));
// → "20/12/2012"

// Korean uses year-month-day order
console.log(new Intl.DateTimeFormat('ko-KR').format(date));
			</code></pre>
		</fieldset>

		<fieldset>
			<legend>Promise</legend>
			<pre><code>
var getJSON = function(url) {
  var promise = new Promise(function(resolve, reject){
    var client = new XMLHttpRequest();
    client.open("GET", url);
    client.onreadystatechange = handler;    
    client.responseType = "application/json";
    client.setRequestHeader("Accept", "application/json");
    client.send();

    function handler() {
      if (this.readyState !== 4) {
        return;
      }
      if (this.status === 200) {
        resolve(this.responseText);
      } else {
        reject(new Error(this.statusText));
      }
    };
  });

  return promise;
};

getJSON("/mockdata/data.json").then(function(json) {
  console.log('Contents: ' + json);
}, function(error) {
  console.error('出错了', error);
});
			</code></pre>
		</fieldset>
	</section>

	<footer class="addBorder">
		<p class="caption">footer</p>
	</footer>

	<script src="/javascript/libs/jquery.min.js" async></script>
	<script src="/javascript/libs/lodash.min.js" async></script>
	<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>